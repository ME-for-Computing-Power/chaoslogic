\documentclass[UTF8]{ctexart}

\usepackage{geometry}
\geometry{a4paper, left=3cm, right=3cm, top=3cm, bottom=3cm}

%\usepackage{fontspec}
\usepackage{float}

\usepackage{graphicx}
\usepackage{svg}
\usepackage{hyperref}
% \hypersetup{
%     colorlinks=true,
%     linkcolor=blue,
%     urlcolor=blue,
%     citecolor=blue
% }

\title{验证自动化流程设计说明}
\author{孙林涵，诸人豪，张煜}
\date{\today}

\begin{document}

%\maketitle
\begin{titlepage}
    \centering
    \vspace*{3cm}
    
    {\Huge \bfseries 华为杯\\[1em]
    第八届中国研究生创“芯”大赛\\[3em]}
    
    {\LARGE 技术文档\\[5em]}
    
    {\Large
    作品名称：混沌逻辑-大模型多智能体自动数字IC前端\hspace{6cm} \\[2em]
    团队名称：混沌逻辑\hspace{6cm} \\[2em]
    参赛队员：孙林涵，诸人豪，张煜\hspace{6cm} \\[5em]
    }
    
    \vfill
    {\large \today}
\end{titlepage}

\begin{abstract}
本软件通过设置项目管理、设计工程师和验证工程师三个Agent，模仿一般的IC设计流程，使通用大语言模型（LLM）生成可靠的RTL代码。本文档将详细介绍软件各个Agent的设计，以及软件的运行流程。
\end{abstract}

\tableofcontents
\newpage

\section{介绍}
%简要介绍文档背景和目的。
近年来，随着LLM技术逐渐进入应用场景，越来越多的领域开始尝试使用LLM来辅助工作。IC设计作为一个复杂的工程领域，也开始探索如何利用LLM来提高设计效率和准确性。然而，大模型的幻觉与错误的输出严重降低了其在IC设计领域的实用性。

为了解决这一问题，本项目设计了一套由大语言模型（Large Language Model, LLM）驱动的RTL代码的生成与验证自动化软件，旨在提高IC设计的效率和准确性。

\section{Agent设计}
软件通过设置项目管理、设计工程师和验证工程师三个Agent，模仿一般的IC设计流程，使通用LLM
生成可靠的RTL代码。下面，介绍各个Agent的设计。

\subsection{项目工程师Agent}
项目工程师解读用户的需求，生成项目的技术规范（下文简称Spec），并将其存储在文件中。
当设计完成时，项目工程师还会根据验证工程师的验证报告，检查设计是否满足规范要求。


\subsection{设计工程师Agent}
设计工程师根据项目工程师提供的Spec，生成RTL代码。设计工程师会将生成的代码存储在文件中，并在必要时进行修改。为避免LLM生成的代码存在语法错误，每次设计工程师提交代码时，都会使用VCS的vlogan工具进行语法检查。若检查出语法错误，设计工程师会根据错误信息进行修改，直到消除所有报错为止。

另外，设计工程师还会根据验证工程师的反馈，修改RTL代码以满足验证需求。

\subsection{验证工程师Agent}
验证工程师根据项目工程师提供的Spec与用户提供的验证方案，生成验证计划，并编写测试用例。验证工程师会使用VCS编译仿真程序，并运行测试用例，生成验证报告。同样，当编译仿真程序时，若出现编译错误，验证工程师也会根据错误信息进行修改，直至成功编译得到simv仿真程序为止。
接下来，验证工程师会检查simv仿真程序的输出，判断RTL代码是否存在问题。当RTL代码存在问题时，验证工程师会将问题反馈给设计工程师，并要求其修改RTL代码。当验证工程师认为RTL代码满足验证需求时，会将验证报告提交给项目工程师。


\section{运行流程}
接下来，介绍本软件是如何调用各个Agent以完成RTL代码的生成与验证的。

图\ref{fig:flowchart}展示了本软件的运行流程。首先，项目工程师Agent会解读用户需求，生成Spec并存储在文件中。接着，设计工程师Agent会根据Spec生成RTL代码，并进行语法检查。若存在语法错误，设计工程师会进行修改。然后，验证工程师Agent会根据Spec与验证方案生成验证计划，并编写测试用例。验证工程师会编译仿真程序并运行测试用例，生成验证报告。当RTL代码存在问题时，验证工程师会将问题反馈给设计工程师，设计工程师会修改RTL代码并重新提交。最终，当验证工程师认为RTL代码满足验证需求时，会将验证报告提交给项目工程师。项目工程师确认RTL代码满足规范要求后，整个流程结束。

为了避免设计工程师的错误误导验证工程师，设计工程师和验证工程师将分别根据项目工程师提供的Spec与用户提供的验证方案生成各自的代码和测试用例。整个流程中多次出现的语法检查和编译步骤，确保了生成的代码和测试用例都是正确的。


%流程图
\begin{figure}[H]
    \centering
    \includesvg[width=0.99\textwidth]{flow.drawio.svg}
    \caption{程序流程图}
    \label{fig:flowchart}
\end{figure}




\section{总结}
本项目设计了一套由LLM驱动的RTL代码的生成与验证自动化软件，实现了IC设计流程的自动化，能够快速产出原型设计。然而，在设计中，我们发现，一般的通用大模型在数字电路相关任务上、尤其是验证任务上，存在相当大的局限性。要进一步减少本项目的迭代次数，提升设计效率，必须对大模型进行针对性的训练，以使其能够更好地理解数字电路的设计与验证流程。本项目产出的原型设计，也应由专业的设计工程师和验证工程师进行进一步的修改与验证，以确保其满足实际的设计需求。

\end{document}