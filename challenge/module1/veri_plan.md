## 1. 帧头识别测试

测试帧头检测功能

- 验证模块能正确识别"E0E0E0E0"帧头序列
- 测试非帧头序列输入时状态机保持空闲状态
- 测试部分匹配帧头序列时的行为
- 测试帧头后立即复位的影响
- 验证帧头识别正确后状态机进入通道选择状态

## 2. 通道选择存储测试

测试通道选择信号的存储功能

- 验证8位通道选择信号被正确存储到寄存器
- 测试各种通道选择模式(单通道、多通道、全1、全0)
- 检查高位数据被正确丢弃
- 测试在通道选择状态期间复位的行为

## 3. 数据字段处理测试

测试数据字段的存储和计数功能

- 验证数据被正确存储到160位移位寄存器
- 测试不同数据长度(16-128位)的处理
- 检查计数器正确记录16位数据块的数量
- 验证数据溢出时的处理(超过128位)
- 测试大端序存储的正确性

## 4. 帧尾识别与CRC提取测试

测试帧尾检测和CRC字段提取

- 验证模块能正确识别"0E0E0E0E"帧尾序列
- 测试帧尾识别后CRC字段的正确提取
- 验证data_count的计算正确(计数器值-2)
- 测试无效帧尾序列时的行为
- 检查帧尾识别后状态转换到CRC校验状态

## 5. CRC校验与输出控制测试

测试CRC校验和输出控制逻辑

- 验证data_to_crc输出正确(截取的低128位)
- 测试CRC校验结果正确控制fifo_w_enable
- 检查crc_err信号在CRC错误时拉高
- 验证CRC校验正确时data_to_fifo的输出格式
- 测试与CRC校验模块的握手信号(crc_en)交互

## 6. 复位功能测试

测试复位信号的行为

- 测试复位时所有寄存器清零
- 验证复位时所有输出信号处于无效状态
- 测试各状态下的复位恢复
- 检查复位后状态机返回空闲状态

## 7. 边界条件测试

测试极端情况和边界值

- 测试最小数据长度(16位)的处理
- 测试最大数据长度(128位)的处理
- 测试data_count=0的情况
- 测试连续帧处理能力
- 测试高频(100MHz)下的稳定性

## 8. 错误处理测试

测试错误场景的应对能力

- 测试帧头/帧尾不完整的情况
- 测试无效数据长度的处理
- 测试CRC校验失败时的行为
- 测试数据溢出时的处理
- 测试信号冲突场景

# 验证环境要求

- 使用SystemVerilog搭建验证平台
- 实现参考模型(帧解析和CRC校验模型)
- 实时比较DUT输出与参考模型结果
- 任何错误立即停止测试并输出详细错误信息
- 使用$dumpfile("wave.vcd")记录完整波形
- 功能覆盖率要求：
  - 帧状态机状态覆盖
  - 数据长度覆盖(16-128位)
  - 通道选择模式覆盖
  - CRC校验结果覆盖
  - 边界条件场景覆盖
- 时序检查要求：
  - 50-100MHz时钟频率测试
  - 建立/保持时间检查
  - 跨时钟域时序检查
  - 输出信号稳定性检查